# Project 2

<p align="center">
  <a href="#">
    <img src="./img/logo.png" alt="Foodie logo" width="72" height="82">
  </a>
</p>

<h3 align="center">Foodie (Back-End REST API)</h3>

<p align="center">
  Foodie is an a discussion forum where people post and comment on a food recipe. 
  <br>
    
  <br>
  ·
  <a href="https://www.pivotaltracker.com/n/projects/2407495">User Stories</a>
   ·
</p>

## Table of contents

- [User Stories](#user-stories)
- [Timeline](#timeline)
- [ERD](#erd)
- [Diagrams](#class-diagrams)
- [API](#api)
- [API Responses](#responses)
- [Objects](#objects)
- [What's Included](#whats-included)
- [Creators](#developers)


## User Stories

[Pivotal Tracker (Back-End REST API)](https://www.pivotaltracker.com/n/projects/2407495)

Application Goals from User Stories are:
    
* Sign-up and Create Profile Foodie User
* Anyone can See Posts and Comments
* Signed-in user able to post a Post and comment
* Signed-in user able to delete it's own Posts and Comments



## Timeline

1. Requirement Analysis
    * Monday(Oct 21, 2019) - user stories
        
        We give our user stories points, so that we could priority our development steps 
 
            https://www.pivotaltracker.com/n/projects/2407495
    
    * Monday(Oct 21, 2019) - ERD
        
            Pair mapped ERD to include 5 tables and various foreign keys to connect the tables.
            
         [ERD](#erd)
        

  

## ERD
##### Rough Sketch of ERD.
![ERD](./img/ERD.jpg)

##### Soft Representation of ERD.
![ERD](./img/ERD_2.png)
    
    * Visualization Generated by DataGrip.
     

## API
```text
Base URL: /, Version: 1.1

Default request content-types: application/json

Default response content-types: application/json

Schemes: http 
```
### Summary

<table style="
    width: 100%;
    max-width: 100%;
    margin-bottom: 20px;
    border: 1px solid #ddd;
    border-collapse: collapse;
    border-spacing: 0;
    background-color: transparent;
    display: table;
">
    <thead>
    <tr>
        <th>Path</th>
        <th>Operation</th>
        <th>Description</th>
        <th>Controller#Method</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="2" style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">/user/signup</a>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#post-usersignup">POST</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Create a User (Sign-up)</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>UserController#signup</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="2" style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">/user/login</a>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">POST</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Create a login session.</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>UserController#login</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="2" style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">/user/reset</a>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">PUT</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Reset User Password.</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>UserController#reset</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="3">
            <a href="#">/profile</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">GET</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Retrieve the profile of the User. (Auth Token Required)</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>ProfileController#getProfile</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">POST</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Create the profile of the User. (Auth Token Required)</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>ProfileController#createProfile</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">PUT</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Update profile of the User. (Auth Token Required)</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>ProfileController#updateProfile</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="2">
            <a href="#">/post</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">GET</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Getting the Posts of the User (Auth Token Required).</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>PostController#listPostByUser</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">POST</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Create a Posts of the User (Auth Token Required).</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>PostController#addPost</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="2" style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">/post/list</a>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">GET</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Retrieve all the posts.</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>PostController#listPost</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="2">
            <a href="#">/post/{postId}</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">PUT</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Updating a Post. (Auth Token Required).</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>PostController#updatePost</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">DELETE</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Deleting a Post. (Auth Token Required).</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>PostController#deletePost</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="1">
            <a href="#">/post/{postId}/comment/</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">GET</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Retrieve all the comments of the a Post. </p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>PostController#listCommentsByPost</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="1">
            <a href="#">/comment</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">GET</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Retrieve all the comments. </p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>CommentController#listComments</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="1">
            <a href="#">/comment/list</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">GET</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Retrieve all the comments of a User. (Auth Token Required). </p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>CommentController#listCommentsByUser</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="1">
            <a href="#">/comment/{postId}</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">GET</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Creating a comment on a post. (Auth Token Required). </p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>CommentController#addComment</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;" rowspan="2">
            <a href="#">/comment/{commentId}</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">PUT</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Updating a comment. (Auth Token Required).</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>PostController#updateComment</p>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <a href="#">DELETE</a>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>Deleting a Comment. (Auth Token Required).</p>
        </td>
        <td style="border: 1px solid #ddd;padding: 5px;">
            <p>PostController#deleteComment</p>
        </td>
    </tr>
    </tbody>
</table>
    
### Security

```text
tokenBasedAuth
type: Bearer Token

Description:

Basic HTTP authorization with Bearer Token.


* Bearer Token will be returned after login using 'username' and 'password'.
```
 
### Responses

#### POST /user/signup
Request Body 
```json5
{
	"username" : "myUser",
	"password" : "myPassword9"
}
```
Response Header
```text
    Status: 200 OK
```
Response Body 
```json5
{
    "username": "myUser",
    "token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJteVVzZXIiLCJleHAiOjE1NzIwMTkxMzAsImlhdCI6MTU3MTkzMjczMH0.3j4YpkvdiAkLBpW5PI1aBYZw1Uhf97gm67BwcNFFN0_pWIoZgrMt9xga1ximg1Xt-fMq5-v2ifE8B8sWTMP0EA"
}
```

#### POST /user/login
Authorization
```text
    token: Bearer Token
```
Request Body 
```json5
    {
    	"username" : "myUser",
    	"password" : "myPassword9"
    }
```
Response Header
```text
    Status: 200 OK
```
Response Body 
```text
{
    "username": "myUser",
    "token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJteVVzZXIiLCJleHAiOjE1NzIwMTkyMjcsImlhdCI6MTU3MTkzMjgyN30.Z9fh-cPXaVLAD9_I3k2w9JYn69lup6PrjtuxRIbUCkwUBHmzsIzhKKaO0sF8hkFJM1tWN61KrkQLl3fYhV9ZZQ"
}
```

#### PUT /user/reset
Authorization
```text
    token: Bearer Token
```
Request Body 
```text
{
	"password" : "123"
}
```
Response Header
```text
    Status: 200 OK
```
Response Body 
```text
    {
        "username": "myUser",
        "token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJteVVzZXIiLCJleHAiOjE1NzIwMTkyMjcsImlhdCI6MTU3MTkzMjgyN30.Z9fh-cPXaVLAD9_I3k2w9JYn69lup6PrjtuxRIbUCkwUBHmzsIzhKKaO0sF8hkFJM1tWN61KrkQLl3fYhV9ZZQ"
    }
```

#### GET /profile
Authorization
```text
    token: Bearer Token
```
Response Header
```text
    Status: 200 OK
```
Response Body 
```text
{
    "email": "myfake@email.com",
    "mobile": "123-123-1234",
    "address": "123 Fake Street"
}
```

#### POST /profile
Authorization
```text
    token: Bearer Token
```
Response Header
```text
    Status: 200 OK
```

Request Body 
```text
{
    	"address": "123 Fake Street",
    	"email": "myfake@email.com",
    	"mobile": "123-123-1234"
}
```
Response Body 
```text
{
	"address": "123 Fake Street",
	"email": "myfake@email.com",
	"mobile": "123-123-1234"
}
```

#### PUT /profile
Authorization
```text
    token: Bearer Token
```
Response Header
```text
    Status: 200 OK
```

Request Body 
```text
{
	"address": "456 Fake Street",
	"email": "myfake@editedemail.com",
	"mobile": "456-123-1234"
}
```
Response Body 
```text
{
    "email": "myfake@editedemail.com",
    "mobile": "456-123-1234",
    "address": "456 Fake Street"
}
```

#### GET /post/list
Response Header
```text
    Status: 200 OK
```

Response Body 
```text
[
    {
        "postId": 1,
        "title": "1 title for my post",
        "postText": "1 My super important post.",
        "userName": "might"
    },
    {
        "postId": 2,
        "title": "1 title for my post",
        "postText": "1 My super important post.",
        "userName": "fright"
    },
    {
        "postId": 3,
        "title": "1 title for my post",
        "postText": "1 My super important post.",
        "userName": "fright"
    },
    {
        "postId": 5,
        "title": "my post title",
        "postText": "my post text",
        "userName": "might"
    },
    {
        "postId": 4,
        "title": "1 title for my post",
        "postText": "my edited post text",
        "userName": "fright"
    }
]
```

#### GET /post/
Authorization
```text
    token: Bearer Token
```
Response Header
```text
    Status: 200 OK
```
Response Body 
```text
[
    {
        "postId": 6,
        "title": "myUser Post Title",
        "postText": "myUser Post Text",
        "userName": "myUser"
    }
]
```

#### POST /post
Authorization
```text
    token: Bearer Token
```
Response Header
```text
    Status: 200 OK
```
Request Body 
```text
{
	"title" : "myUser Post Title",
	"postText" : "myUser Post Text"
}
```
Response Body 
```text
{
    "postId": 6,
    "title": "myUser Post Title",
    "postText": "myUser Post Text",
    "userName": "myUser"
}
```
#### PUT /{postId}
Authorization
```text
    token: Bearer Token
```
Response Header
```text
    Status: 200 OK
```

Request Body 
```text
{
	"postText" : "my edited post text for might"
}
```
Response Body 
```text
{
    "postId": 5,
    "title": "my post title",
    "postText": "my edited post text for might",
    "userName": "might"
}
```
#### DELETE /{postId}
Authorization
```text
    token: Bearer Token
```
Response Header
```text
    Status: 200 OK
```
Response Body 
```text
5
```

#### GET /post/{postId}/comment/
Response Header
```text
    Status: 200 OK
```
Response Body 
```text
[
    {
        "commentId": 1,
        "commentText": "Super Post Comment",
        "username": "might",
        "postTitle": "1 title for my post",
        "postid": "1"
    },
    {
        "commentId": 4,
        "commentText": "Super Fright Post Comment",
        "username": "fright",
        "postTitle": "1 title for my post",
        "postid": "1"
    },
    {
        "commentId": 2,
        "commentText": "Super Re-Edited Comment",
        "username": "fright",
        "postTitle": "1 title for my post",
        "postid": "1"
    }
]
```
#### POST /post/{postId}/comment/
Authorization
```text
    token: Bearer Token
```

Response Header
```text
    Status: 200 OK
```
Request Body 
```text
{
	"commentText" : "Might comment on post"
}
```
Response Body 
```text
{
    "commentId": 5,
    "commentText": "Might comment on post",
    "username": "might",
    "postTitle": "1 title for my post",
    "postid": "1"
}
```

#### PUT /comment/{commentId}
Authorization
```text
    token: Bearer Token
```

Response Header
```text
    Status: 200 OK
```
Request Body 
```text
{
	"commentText" : "Some edited text by might"
}
```
Response Body 
```text

    "commentId": 1,
    "commentText": "Some edited text by might",
    "username": "might",
    "postTitle": "1 title for my post",
    "postid": "1"
}
```
#### DELETE /comment/{commentId}
Authorization
```text
    token: Bearer Token
```

Response Header
```text
    Status: 200 OK
```
Response Body 
```text
1
```


    
### Objects

```text
User
 * Properties 
    -> userId : integer
    -> username : string
    -> passsword : string
    -> roles : List<Role>
    -> profile : UserProfile
    -> posts : List<Post>
    -> comments : List<Comment>
```

```text
Role
 * Properties 
    -> roleId : integer
    -> name : string
    -> users : List<User>
```

```text
Profile
 * Properties 
    -> profileId : integer
    -> email : string
    -> mobile : string
    -> address : string
    -> user : User
```

```text
Post
 * Properties 
    -> postId : integer
    -> title : string
    -> postText : string
    -> user : User
```

```text
Comment
 * Properties 
    -> commentId : integer
    -> commentText : string
    -> user : User
    -> post : Post
```

```text
JwtResponse
 * Properties 
    -> username : string
    -> jwt : string
```

## Class Diagrams

### Package Diagram
![package](./img/package_diagram.png)  

### Package dao
![package](./img/package_dao.png)  
     
### Package service
![package](./img/package_service.png) 
     
### Package config
![package](./img/config_package.png) 

### Package entity
![package](./img/package_entity.png) 

### Package controller
![package](./img/controller_package.png) 

## What's included

Within the download you'll find the following directories and files, logically grouping common assets and providing both compiled and minified variations. You'll see something like this:

```text
cognizant-p2/
├── README.md
├── pom.xml
├── src
│   ├── com
│   │   └── ga
│   │       ├── config
│   │       │   ├── AppConfig.java
│   │       │   ├── AppDispatcherServlet.java
│   │       │   ├── JwtRequestFilter.java
│   │       │   ├── JwtUtil.java
│   │       │   ├── SecurityConfig.java
│   │       │   └── SecurityConfigInitializer.java
│   │       ├── controller
│   │       │   ├── CommentController.java
│   │       │   ├── PostController.java
│   │       │   ├── ProfileController.java
│   │       │   └── UserController.java
│   │       ├── dao
│   │       │   ├── CommentDao.java
│   │       │   ├── CommentDaoImpl.java
│   │       │   ├── PostDao.java
│   │       │   ├── PostDaoImpl.java
│   │       │   ├── UserDao.java
│   │       │   ├── UserDaoImpl.java
│   │       │   ├── UserProfileDao.java
│   │       │   ├── UserProfileDaoImpl.java
│   │       │   ├── UserRoleDao.java
│   │       │   └── UserRoleDaoImpl.java
│   │       ├── entity
│   │       │   ├── Comment.java
│   │       │   ├── JwtResponse.java
│   │       │   ├── Post.java
│   │       │   ├── User.java
│   │       │   ├── UserProfile.java
│   │       │   └── UserRole.java
│   │       └── service
│   │           ├── CommentService.java
│   │           ├── CommentServiceImpl.java
│   │           ├── PostService.java
│   │           ├── PostServiceImpl.java
│   │           ├── UserProfileService.java
│   │           ├── UserProfileServiceImpl.java
│   │           ├── UserRoleService.java
│   │           ├── UserRoleServiceImpl.java
│   │           ├── UserService.java
│   │           └── UserServiceImpl.java
│   ├── main
│   │   └── webapp
│   │       ├── WEB-INF
│   │       │   └── web.xml
│   │       └── index.jsp
│   └── resources
│       ├── application-dev.properties
│       └── application.properties
└── test
    └── com
        └── ga
            ├── controller
            │   ├── CommentControllerTest.java
            │   ├── PostControllerTest.java
            │   ├── ProfileControllerTest.java
            │   └── UserControllerTest.java
            ├── dao
            │   ├── CommentDaoTest.java
            │   ├── PostDaoTest.java
            │   ├── UserDaoTest.java
            │   ├── UserProfileDaoTest.java
            │   └── UserRoleDaoTest.java
            └── service
                ├── CommentServiceTest.java
                ├── PostServiceTest.java
                ├── UserProfileServiceTest.java
                ├── UserRoleServiceTest.java
                └── UserServiceTest.java



```
    
## Developers

**Marcus Sauceda**

- <https://github.com/ScottSauceda>

**Mohammad Javed**

- <https://github.com/gajjuCoderBoi>